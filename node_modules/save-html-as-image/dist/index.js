var t=require("file-saver"),e=require("save-svg-as-png"),n=require("html-to-image");function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}const o=function(){function t(){}return t.prototype.then=function(e,n){const r=new t,o=this.s;if(o){const t=1&o?e:n;if(t){try{i(r,1,t(this.v))}catch(t){i(r,2,t)}return r}return this}return this.o=function(t){try{const o=t.v;1&t.s?i(r,1,e?e(o):o):n?i(r,1,n(o)):i(r,2,o)}catch(t){i(r,2,t)}},r},t}();function i(t,e,n){if(!t.s){if(n instanceof o){if(!n.s)return void(n.o=i.bind(null,t,e));1&e&&(e=n.s),n=n.v}if(n&&n.then)return void n.then(i.bind(null,t,e),i.bind(null,t,2));t.s=e,t.v=n;const r=t.o;r&&r(t)}}function u(t){return t instanceof o&&1&t.s}const c="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function a(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var f=null,l={filename:"Image",forceFixText:!1,printDate:!0},s=function(t){var e=window.getComputedStyle(t);t.style.color=e.color},h=function(t){var e=window.getComputedStyle(t);t.style.width=e.width,t.style.height=e.height},v=function(t,e){void 0===e&&(e=["b","h1","h2","h3","h4","h5","h6","i","mark","p","small","strong"]);var n=t.querySelectorAll(e),r=Array.isArray(n),o=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if((o=n.next()).done)break;i=o.value}var u=i;u.style.fontFamily=window.getComputedStyle(u).fontFamily,u.style.fontSize=window.getComputedStyle(u).fontSize,u.style.fontWeight=window.getComputedStyle(u).fontWeight,u.style.width=window.getComputedStyle(u).width}},d=function(t){try{var n=t.querySelectorAll("svg"),r=[],a=function(t,e,n){if("function"==typeof t[c]){var r,a,f,l=t[c]();if(function t(n){try{for(;!(r=l.next()).done;)if((n=e(r.value))&&n.then){if(!u(n))return void n.then(t,f||(f=i.bind(null,a=new o,2)));n=n.v}a?i(a,1,n):a=n}catch(t){i(a||(a=new o),2,t)}}(),l.return){var s=function(t){try{r.done||l.return()}catch(t){}return t};if(a&&a.then)return a.then(s,(function(t){throw s(t)}));s()}return a}if(!("length"in t))throw new TypeError("Object is not iterable");for(var h=[],v=0;v<t.length;v++)h.push(t[v]);return function(t,e,n){var r,c,a=-1;return function n(f){try{for(;++a<t.length;)if((f=e(a))&&f.then){if(!u(f))return void f.then(n,c||(c=i.bind(null,r=new o,2)));f=f.v}r?i(r,1,f):r=f}catch(t){i(r||(r=new o),2,t)}}(),r}(h,(function(t){return e(h[t])}))}(n,(function(t){function n(){u.dataset.icon=o,u.width=t.clientWidth,u.height=t.clientHeight,t.parentNode.replaceChild(u,t)}var o=t.getAttribute("data-icon"),i=r.find((function(t){return t.dataIcon===o})),u=document.createElement("img"),c=function(){if(!i)return Promise.resolve(e.svgAsPngUri(t,"icon.png")).then((function(t){u.src=t,r.push({dataIcon:o,uri:t})}));u.src=i.uri}();return c&&c.then?c.then(n):n()}));return Promise.resolve(a&&a.then?a.then((function(){})):void 0)}catch(t){return Promise.reject(t)}},y=function(t){f=t.style.padding,t.style.padding="3px"},m=function(t){t.style.padding=f},g=function(t,e){void 0===e&&(e=!1);var n=t.querySelectorAll("svg");!function(t){v(t,[".fixed-text"])}(t),e&&v(t);var r=n,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var u;if(o){if(i>=r.length)break;u=r[i++]}else{if((i=r.next()).done)break;u=i.value}var c=u;s(c),h(c)}},p=function(t){return r({},l,{},t)},w=function(t){if(t.printDate){var e=(new Date).toDateString();return t.filename+" ("+e+")"}return t.filename},b=function(e,r){void 0===r&&(r={});try{var o=function(){m(e),t.saveAs(u,w(i)+".png")},i=p(r),u=null;g(e,i.forceFixText),y(e);var c=a((function(){return Promise.resolve(n.toPng(e,{style:{boxShadow:"none"}})).then((function(t){u=t}))}),(function(){return Promise.resolve(d(e)).then((function(){return Promise.resolve(n.toPng(e)).then((function(){return Promise.resolve(n.toPng(e,{style:{boxShadow:"none"}})).then((function(t){u=t}))}))}))}));return Promise.resolve(c&&c.then?c.then(o):o())}catch(t){return Promise.reject(t)}};exports.downloadDOM=function(t,e,n){void 0===e&&(e="Image"),void 0===n&&(n=!1);try{return Promise.resolve(b(t,{forceFixText:n,filename:e})).then((function(){}))}catch(t){return Promise.reject(t)}},exports.saveAsJpeg=function(e,r){void 0===r&&(r={});try{var o=function(){m(e),t.saveAs(u,w(i)+".jpeg")},i=p(r),u=null;g(e,i.forceFixText),y(e);var c=a((function(){return Promise.resolve(n.toJpeg(e,{style:{boxShadow:"none"}})).then((function(t){u=t}))}),(function(){return Promise.resolve(d(e)).then((function(){return Promise.resolve(n.toJpeg(e)).then((function(){return Promise.resolve(n.toJpeg(e,{style:{boxShadow:"none"}})).then((function(t){u=t}))}))}))}));return Promise.resolve(c&&c.then?c.then(o):o())}catch(t){return Promise.reject(t)}},exports.saveAsPng=b;
//# sourceMappingURL=index.js.map
