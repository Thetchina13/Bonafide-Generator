!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("file-saver"),require("save-svg-as-png"),require("html-to-image")):"function"==typeof define&&define.amd?define(["exports","file-saver","save-svg-as-png","html-to-image"],t):t((e=e||self).saveHtmlAsImage={},e.fileSaver,e.saveSvgAsPng,e.htmlToImage)}(this,(function(e,t,n,r){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const i=function(){function e(){}return e.prototype.then=function(t,n){const r=new e,o=this.s;if(o){const e=1&o?t:n;if(e){try{u(r,1,e(this.v))}catch(e){u(r,2,e)}return r}return this}return this.o=function(e){try{const o=e.v;1&e.s?u(r,1,t?t(o):o):n?u(r,1,n(o)):u(r,2,o)}catch(e){u(r,2,e)}},r},e}();function u(e,t,n){if(!e.s){if(n instanceof i){if(!n.s)return void(n.o=u.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(u.bind(null,e,t),u.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}function f(e){return e instanceof i&&1&e.s}const a="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function c(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var s=null,l={filename:"Image",forceFixText:!1,printDate:!0},h=function(e){var t=window.getComputedStyle(e);e.style.color=t.color},v=function(e){var t=window.getComputedStyle(e);e.style.width=t.width,e.style.height=t.height},d=function(e,t){void 0===t&&(t=["b","h1","h2","h3","h4","h5","h6","i","mark","p","small","strong"]);var n=e.querySelectorAll(t),r=Array.isArray(n),o=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if((o=n.next()).done)break;i=o.value}var u=i;u.style.fontFamily=window.getComputedStyle(u).fontFamily,u.style.fontSize=window.getComputedStyle(u).fontSize,u.style.fontWeight=window.getComputedStyle(u).fontWeight,u.style.width=window.getComputedStyle(u).width}},y=function(e){try{var t=e.querySelectorAll("svg"),r=[],o=function(e,t,n){if("function"==typeof e[a]){var r,o,c,s=e[a]();if(function e(n){try{for(;!(r=s.next()).done;)if((n=t(r.value))&&n.then){if(!f(n))return void n.then(e,c||(c=u.bind(null,o=new i,2)));n=n.v}o?u(o,1,n):o=n}catch(e){u(o||(o=new i),2,e)}}(),s.return){var l=function(e){try{r.done||s.return()}catch(e){}return e};if(o&&o.then)return o.then(l,(function(e){throw l(e)}));l()}return o}if(!("length"in e))throw new TypeError("Object is not iterable");for(var h=[],v=0;v<e.length;v++)h.push(e[v]);return function(e,t,n){var r,o,a=-1;return function n(c){try{for(;++a<e.length;)if((c=t(a))&&c.then){if(!f(c))return void c.then(n,o||(o=u.bind(null,r=new i,2)));c=c.v}r?u(r,1,c):r=c}catch(e){u(r||(r=new i),2,e)}}(),r}(h,(function(e){return t(h[e])}))}(t,(function(e){function t(){u.dataset.icon=o,u.width=e.clientWidth,u.height=e.clientHeight,e.parentNode.replaceChild(u,e)}var o=e.getAttribute("data-icon"),i=r.find((function(e){return e.dataIcon===o})),u=document.createElement("img"),f=function(){if(!i)return Promise.resolve(n.svgAsPngUri(e,"icon.png")).then((function(e){u.src=e,r.push({dataIcon:o,uri:e})}));u.src=i.uri}();return f&&f.then?f.then(t):t()}));return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},m=function(e){s=e.style.padding,e.style.padding="3px"},g=function(e){e.style.padding=s},p=function(e,t){void 0===t&&(t=!1);var n=e.querySelectorAll("svg");!function(e){d(e,[".fixed-text"])}(e),t&&d(e);var r=n,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var u;if(o){if(i>=r.length)break;u=r[i++]}else{if((i=r.next()).done)break;u=i.value}var f=u;h(f),v(f)}},b=function(e){return o({},l,{},e)},w=function(e){if(e.printDate){var t=(new Date).toDateString();return e.filename+" ("+t+")"}return e.filename},S=function(e,n){void 0===n&&(n={});try{var o=function(){g(e),t.saveAs(u,w(i)+".png")},i=b(n),u=null;p(e,i.forceFixText),m(e);var f=c((function(){return Promise.resolve(r.toPng(e,{style:{boxShadow:"none"}})).then((function(e){u=e}))}),(function(){return Promise.resolve(y(e)).then((function(){return Promise.resolve(r.toPng(e)).then((function(){return Promise.resolve(r.toPng(e,{style:{boxShadow:"none"}})).then((function(e){u=e}))}))}))}));return Promise.resolve(f&&f.then?f.then(o):o())}catch(e){return Promise.reject(e)}};e.downloadDOM=function(e,t,n){void 0===t&&(t="Image"),void 0===n&&(n=!1);try{return Promise.resolve(S(e,{forceFixText:n,filename:t})).then((function(){}))}catch(e){return Promise.reject(e)}},e.saveAsJpeg=function(e,n){void 0===n&&(n={});try{var o=function(){g(e),t.saveAs(u,w(i)+".jpeg")},i=b(n),u=null;p(e,i.forceFixText),m(e);var f=c((function(){return Promise.resolve(r.toJpeg(e,{style:{boxShadow:"none"}})).then((function(e){u=e}))}),(function(){return Promise.resolve(y(e)).then((function(){return Promise.resolve(r.toJpeg(e)).then((function(){return Promise.resolve(r.toJpeg(e,{style:{boxShadow:"none"}})).then((function(e){u=e}))}))}))}));return Promise.resolve(f&&f.then?f.then(o):o())}catch(e){return Promise.reject(e)}},e.saveAsPng=S}));
//# sourceMappingURL=index.umd.js.map
