import{saveAs as t}from"file-saver";import{svgAsPngUri as e}from"save-svg-as-png";import{toJpeg as n,toPng as r}from"html-to-image";function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}const i=function(){function t(){}return t.prototype.then=function(e,n){const r=new t,o=this.s;if(o){const t=1&o?e:n;if(t){try{u(r,1,t(this.v))}catch(t){u(r,2,t)}return r}return this}return this.o=function(t){try{const o=t.v;1&t.s?u(r,1,e?e(o):o):n?u(r,1,n(o)):u(r,2,o)}catch(t){u(r,2,t)}},r},t}();function u(t,e,n){if(!t.s){if(n instanceof i){if(!n.s)return void(n.o=u.bind(null,t,e));1&e&&(e=n.s),n=n.v}if(n&&n.then)return void n.then(u.bind(null,t,e),u.bind(null,t,2));t.s=e,t.v=n;const r=t.o;r&&r(t)}}function c(t){return t instanceof i&&1&t.s}const f="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function l(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var a=null,s={filename:"Image",forceFixText:!1,printDate:!0},h=function(t){var e=window.getComputedStyle(t);t.style.color=e.color},v=function(t){var e=window.getComputedStyle(t);t.style.width=e.width,t.style.height=e.height},d=function(t,e){void 0===e&&(e=["b","h1","h2","h3","h4","h5","h6","i","mark","p","small","strong"]);var n=t.querySelectorAll(e),r=Array.isArray(n),o=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if((o=n.next()).done)break;i=o.value}var u=i;u.style.fontFamily=window.getComputedStyle(u).fontFamily,u.style.fontSize=window.getComputedStyle(u).fontSize,u.style.fontWeight=window.getComputedStyle(u).fontWeight,u.style.width=window.getComputedStyle(u).width}},y=function(t){try{var n=t.querySelectorAll("svg"),r=[],o=function(t,e,n){if("function"==typeof t[f]){var r,o,l,a=t[f]();if(function t(n){try{for(;!(r=a.next()).done;)if((n=e(r.value))&&n.then){if(!c(n))return void n.then(t,l||(l=u.bind(null,o=new i,2)));n=n.v}o?u(o,1,n):o=n}catch(t){u(o||(o=new i),2,t)}}(),a.return){var s=function(t){try{r.done||a.return()}catch(t){}return t};if(o&&o.then)return o.then(s,(function(t){throw s(t)}));s()}return o}if(!("length"in t))throw new TypeError("Object is not iterable");for(var h=[],v=0;v<t.length;v++)h.push(t[v]);return function(t,e,n){var r,o,f=-1;return function n(l){try{for(;++f<t.length;)if((l=e(f))&&l.then){if(!c(l))return void l.then(n,o||(o=u.bind(null,r=new i,2)));l=l.v}r?u(r,1,l):r=l}catch(t){u(r||(r=new i),2,t)}}(),r}(h,(function(t){return e(h[t])}))}(n,(function(t){function n(){u.dataset.icon=o,u.width=t.clientWidth,u.height=t.clientHeight,t.parentNode.replaceChild(u,t)}var o=t.getAttribute("data-icon"),i=r.find((function(t){return t.dataIcon===o})),u=document.createElement("img"),c=function(){if(!i)return Promise.resolve(e(t,"icon.png")).then((function(t){u.src=t,r.push({dataIcon:o,uri:t})}));u.src=i.uri}();return c&&c.then?c.then(n):n()}));return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(t){return Promise.reject(t)}},m=function(t){a=t.style.padding,t.style.padding="3px"},g=function(t){t.style.padding=a},p=function(t,e){void 0===e&&(e=!1);var n=t.querySelectorAll("svg");!function(t){d(t,[".fixed-text"])}(t),e&&d(t);var r=n,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var u;if(o){if(i>=r.length)break;u=r[i++]}else{if((i=r.next()).done)break;u=i.value}var c=u;h(c),v(c)}},b=function(t){return o({},s,{},t)},w=function(t){if(t.printDate){var e=(new Date).toDateString();return t.filename+" ("+e+")"}return t.filename},S=function(e,r){void 0===r&&(r={});try{var o=function(){g(e),t(u,w(i)+".jpeg")},i=b(r),u=null;p(e,i.forceFixText),m(e);var c=l((function(){return Promise.resolve(n(e,{style:{boxShadow:"none"}})).then((function(t){u=t}))}),(function(){return Promise.resolve(y(e)).then((function(){return Promise.resolve(n(e)).then((function(){return Promise.resolve(n(e,{style:{boxShadow:"none"}})).then((function(t){u=t}))}))}))}));return Promise.resolve(c&&c.then?c.then(o):o())}catch(t){return Promise.reject(t)}},x=function(e,n){void 0===n&&(n={});try{var o=function(){g(e),t(u,w(i)+".png")},i=b(n),u=null;p(e,i.forceFixText),m(e);var c=l((function(){return Promise.resolve(r(e,{style:{boxShadow:"none"}})).then((function(t){u=t}))}),(function(){return Promise.resolve(y(e)).then((function(){return Promise.resolve(r(e)).then((function(){return Promise.resolve(r(e,{style:{boxShadow:"none"}})).then((function(t){u=t}))}))}))}));return Promise.resolve(c&&c.then?c.then(o):o())}catch(t){return Promise.reject(t)}},P=function(t,e,n){void 0===e&&(e="Image"),void 0===n&&(n=!1);try{return Promise.resolve(x(t,{forceFixText:n,filename:e})).then((function(){}))}catch(t){return Promise.reject(t)}};export{P as downloadDOM,S as saveAsJpeg,x as saveAsPng};
//# sourceMappingURL=index.modern.js.map
